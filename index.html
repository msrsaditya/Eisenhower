<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eisenhower Task Manager</title>
  <style>
    /* Reset and base styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      line-height: 1.6;
      color: #e0e0e0; /* Light text for dark backgrounds */
      background-color: #121212; /* Dark mode background */
      padding: 2rem;
    }
    /* Container styles */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background-color: #1e1e1e; /* Slightly lighter dark for the container */
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
      padding: 2rem;
    }
    /* Header styles */
    .header {
      text-align: center;
      margin-bottom: 2rem;
    }
    .header h1 {
      font-size: 2rem;
      color: #ffffff; /* Bright header text */
      margin-bottom: 1rem;
    }
    /* Form styles */
    .task-form {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    .task-input {
      flex: 1;
      padding: 0.75rem;
      border: 1px solid #444;
      border-radius: 4px;
      font-size: 1rem;
      background-color: #2c2c2c;
      color: #e0e0e0;
    }
    /* Quadrant selector gets a bit less width */
    #quadrantSelect {
      flex: 0.3;
      appearance: none;
      padding: 0rem 0rem 0rem 0.5rem; /* extra right padding for the arrow */
      background: #2c2c2c url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23e0e0e0' viewBox='0 0 24 24'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E") no-repeat right center;
      background-size: 1.5rem;
      border: 1px solid #444;
      border-radius: 4px;
    }

    /* Matrix grid styles */
    .matrix-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    /* Quadrant styles */
    .quadrant {
      padding: 1.5rem;
      border-radius: 8px;
      min-height: 300px;
      transition: border-color 0.2s;
      position: relative;
    }
    .quadrant h2 {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      color: #ffffff;
    }
    /* Dark-mode quadrant background colors */
    .urgent-important {
      background-color: #7f1d1d; /* Dark red */
    }
    .not-urgent-important {
      background-color: #1e3a8a; /* Dark blue */
    }
    .urgent-not-important {
      background-color: #9a3412; /* Dark amber/orange */
    }
    .not-urgent-not-important {
      background-color: #14532d; /* Dark green */
    }
    /* Task card styles */
    .task-card {
      background: #2c2c2c;
      padding: 0.75rem;
      border-radius: 4px;
      margin-bottom: 0.75rem;
      cursor: move;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: box-shadow 0.2s, opacity 0.2s;
      user-select: none;
      color: #e0e0e0;
    }
    .task-card:hover {
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    }
    .delete-button {
      opacity: 0.7; /* Improved accessibility */
      background: none;
      border: none;
      color: #e53e3e;
      cursor: pointer;
      font-size: 1.25rem;
      transition: opacity 0.2s;
      padding: 0 0.5rem;
    }
    .delete-button:hover {
      opacity: 1;
    }
    /* Instructions styles */
    .instructions {
      text-align: center;
      color: #a0a0a0;
      font-size: 0.875rem;
    }
    /* Drag and drop styles */
    .dragging {
      opacity: 0.5;
    }
    .drag-over {
      border: 2px dashed #6200ee;
      background-color: rgba(66, 153, 225, 0.1); /* Subtle background for visual feedback */
    }
    /* Responsive design */
    @media (max-width: 768px) {
      .matrix-grid {
        grid-template-columns: 1fr;
      }
      .container {
        padding: 1rem;
      }
      body {
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>Eisenhower Task Manager</h1>
    </header>

    <!-- Form with added quadrant selection -->
    <form class="task-form" id="taskForm">
      <input 
        type="text" 
        class="task-input" 
        id="taskInput" 
        placeholder="Add a new task..." 
        required
      >
      <select id="quadrantSelect" class="task-input">
        <option value="urgentImportant">Urgent & Important</option>
        <option value="notUrgentImportant">Not Urgent & Important</option>
        <option value="urgentNotImportant">Urgent & Not Important</option>
        <option value="notUrgentNotImportant">Not Urgent & Not Important</option>
      </select>
    </form>

    <div class="matrix-grid">
      <div class="quadrant urgent-important" data-quadrant="urgentImportant">
        <h2>Urgent & Important</h2>
      </div>
      <div class="quadrant not-urgent-important" data-quadrant="notUrgentImportant">
        <h2>Not Urgent & Important</h2>
      </div>
      <div class="quadrant urgent-not-important" data-quadrant="urgentNotImportant">
        <h2>Urgent & Not Important</h2>
      </div>
      <div class="quadrant not-urgent-not-important" data-quadrant="notUrgentNotImportant">
        <h2>Not Urgent & Not Important</h2>
      </div>
    </div>
    <p class="instructions">
      Drag and drop tasks between quadrants to reorganize them. 
      Tasks persist between sessions.
    </p>
  </div>
  <script>
    // State management with persistence
    let tasks = {
      urgentImportant: [],
      notUrgentImportant: [],
      urgentNotImportant: [],
      notUrgentNotImportant: []
    };

    // Save tasks to localStorage
    function saveTasks() {
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    // Render all tasks from the tasks object
    function renderAllTasks() {
      document.querySelectorAll('.quadrant').forEach(quadrant => {
        // Preserve header text by extracting it first
        const headerText = quadrant.querySelector('h2').innerText;
        quadrant.innerHTML = '<h2>' + headerText + '</h2>';
      });
      for (const quadrantId in tasks) {
        const quadrantEl = document.querySelector(`[data-quadrant="${quadrantId}"]`);
        tasks[quadrantId].forEach(task => {
          quadrantEl.appendChild(createTaskCard(task.text, task.id));
        });
      }
    }

    // Create a new task card element
    function createTaskCard(taskText, taskId) {
      const taskCard = document.createElement('div');
      taskCard.className = 'task-card';
      taskCard.draggable = true;
      taskCard.dataset.taskId = taskId;

      const taskContent = document.createElement('span');
      taskContent.textContent = taskText;

      const deleteButton = document.createElement('button');
      deleteButton.className = 'delete-button';
      deleteButton.innerHTML = 'Ã—';
      deleteButton.onclick = (e) => {
        e.stopPropagation();
        deleteTask(taskId);
      };

      taskCard.appendChild(taskContent);
      taskCard.appendChild(deleteButton);

      // Drag event listeners
      taskCard.addEventListener('dragstart', handleDragStart);
      taskCard.addEventListener('dragend', handleDragEnd);

      return taskCard;
    }

    // Add a new task with quadrant selection and duplicate check
    function addTask(taskText) {
      // Prevent duplicate tasks
      const allTasks = Object.values(tasks).flat();
      if (allTasks.some(task => task.text === taskText)) {
        alert('Task already exists!');
        return;
      }
      const quadrantSelect = document.getElementById('quadrantSelect');
      const quadrantId = quadrantSelect.value;
      const taskId = Date.now().toString();

      tasks[quadrantId].push({ id: taskId, text: taskText });
      const quadrantEl = document.querySelector(`[data-quadrant="${quadrantId}"]`);
      quadrantEl.appendChild(createTaskCard(taskText, taskId));
      saveTasks();
    }

    // Delete a task
    function deleteTask(taskId) {
      for (let quadrant in tasks) {
        tasks[quadrant] = tasks[quadrant].filter(task => task.id !== taskId);
      }
      const taskCard = document.querySelector(`[data-task-id="${taskId}"]`);
      if (taskCard) {
        taskCard.remove();
      }
      saveTasks();
    }

    // Drag and drop handlers
    function handleDragStart(e) {
      e.target.classList.add('dragging');
      e.dataTransfer.setData('text/plain', e.target.dataset.taskId);
      const sourceQuadrant = e.target.closest('.quadrant').dataset.quadrant;
      e.dataTransfer.setData('sourceQuadrant', sourceQuadrant);
    }

    function handleDragEnd(e) {
      e.target.classList.remove('dragging');
      document.querySelectorAll('.quadrant').forEach(quadrant => {
        quadrant.classList.remove('drag-over');
      });
    }

    function handleDragOver(e) {
      e.preventDefault();
      e.currentTarget.classList.add('drag-over');
    }

    function handleDragLeave(e) {
      e.currentTarget.classList.remove('drag-over');
    }

    function handleDrop(e) {
      e.preventDefault();
      const quadrant = e.currentTarget;
      quadrant.classList.remove('drag-over');

      const taskId = e.dataTransfer.getData('text/plain');
      const sourceQuadrant = e.dataTransfer.getData('sourceQuadrant');
      const targetQuadrant = quadrant.dataset.quadrant;

      if (sourceQuadrant === targetQuadrant) return;

      const taskIndex = tasks[sourceQuadrant].findIndex(task => task.id === taskId);
      if (taskIndex === -1) return;

      const task = tasks[sourceQuadrant].splice(taskIndex, 1)[0];
      tasks[targetQuadrant].push(task);

      const taskElement = document.querySelector(`[data-task-id="${taskId}"]`);
      quadrant.appendChild(taskElement);
      saveTasks();
    }

    // Initialize the application and load saved tasks
    document.addEventListener('DOMContentLoaded', () => {
      const savedTasks = localStorage.getItem('tasks');
      if (savedTasks) {
        tasks = JSON.parse(savedTasks);
        renderAllTasks();
      }
      
      const taskForm = document.getElementById('taskForm');
      const taskInput = document.getElementById('taskInput');
      
      taskForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const taskText = taskInput.value.trim();
        if (taskText) {
          addTask(taskText);
          taskInput.value = '';
        }
      });

      document.querySelectorAll('.quadrant').forEach(quadrant => {
        quadrant.addEventListener('dragover', handleDragOver);
        quadrant.addEventListener('dragleave', handleDragLeave);
        quadrant.addEventListener('drop', handleDrop);
      });
    });
  </script>
</body>
</html>
